(this["webpackJsonpwords-app"]=this["webpackJsonpwords-app"]||[]).push([[0],{110:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),c=n(40),o=n.n(c),s=n(4),d=function(){return Object(s.jsx)("div",{children:"Loading..."})},i=n(15),u=n(37),l=n(44);n(111);l.a.initializeApp({apiKey:"AIzaSyBr1PLF6Zdq_k2eLlR3HlgUApNGejrBNIA",authDomain:"english-vocabulary-react.firebaseapp.com",databaseURL:"https://english-vocabulary-react-default-rtdb.firebaseio.com",projectId:"english-vocabulary-react",storageBucket:"english-vocabulary-react.appspot.com",messagingSenderId:"281598012164",appId:"1:281598012164:web:7e8ed5899b5cf80bf8fe51"});var j={getData:function(){return new Promise((function(e,t){l.a.database().ref("words").on("value",(function(t){var n=function(e){var t=e.val();return Object.keys(t).map((function(e){var n=t[e];return Object(u.a)(Object(u.a)({},n),{},{key:e})}))}(t);return e(n)}),(function(e){t(e)}))}))},addItem:function(e){var t=l.a.database().ref().child("words").push().key,n={};return n["/words/".concat(t)]=e,l.a.database().ref().update(n)},updateItem:function(e){l.a.database().ref("words/".concat(e.key)).update({eng:e.eng,rus:e.rus})},deleteItem:function(e){console.log(e.key),l.a.database().ref("words/".concat(e.key)).remove().then((function(){console.log("Remove succeeded.")})).catch((function(e){console.log("Remove failed: ".concat(e.message))}))}},b=function(e){throw new Error(e)},f=function(){var e=Object(a.useState)({type:"loading"}),t=Object(i.a)(e,2),n=t[0],r=t[1];Object(a.useEffect)((function(){switch(n.type){case"loading":j.getData().then((function(e){r({type:"loaded",wordsList:e})})).catch((function(e){r({type:"error",error:e.message})}));break;case"loaded":case"error":break;default:b(n)}}),[n]);return{state:n,reloadWordsList:function(){r({type:"loading"})}}},O=function(e){var t=e.onMsg;return Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)("div",{children:"Server error"}),Object(s.jsx)("button",{title:"Reload data",type:"button",onClick:function(){t({type:"ReloadDataButtonClicked"})},children:"Reload data"})]})},h=n(5),g=n(160),p=n(152),x=function(e){var t=e.onMsg,n=function(){var e=Object(a.useState)({type:"not_asked"}),t=Object(i.a)(e,2),n=t[0],r=t[1];Object(a.useEffect)((function(){switch(n.type){case"not_asked":case"loaded":case"error":break;case"loading":c(n.draft);break;default:return b(n)}}),[n]);var c=function(e){j.addItem(e).then((function(){r({type:"loaded",word:e})})).catch((function(e){r({type:"error",error:e.message})}))};return{state:n,addWord:function(e){r({type:"loading",draft:e})},setError:function(e){r({type:"error",error:e})}}}(),r=n.state,c=n.addWord,o=n.setError,l=Object(a.useState)({eng:"",rus:""}),f=Object(i.a)(l,2),O=f[0],x=f[1];Object(a.useEffect)((function(){if("loaded"===r.type)t({type:"NewWordAdded",word:r.word})}),[t,r]);var v=function(e){var t=e.target,n=t.name,a=t.value;x((function(e){return Object(u.a)(Object(u.a)({},e),{},Object(h.a)({},n,a))}))},m=function(){!function(e){var t=e.eng.trim(),n=e.rus.trim();return!(t.length+n.length<2)&&!(!/^[\u0430-\u044f\u0410-\u042f\s]*$/.test(n)||!/^[a-zA-Z\s]*$/.test(t))}(O)?o("draft is not valid"):c(O)};switch(r.type){case"loading":return Object(s.jsx)(d,{});case"error":case"not_asked":case"loaded":return Object(s.jsxs)("form",{method:"get",onSubmit:m,children:["error"===r.type?r.error:"no errors",Object(s.jsx)(g.a,{type:"text",value:O.eng,name:"eng",onChange:v}),Object(s.jsx)(g.a,{type:"text",value:O.rus,name:"rus",onChange:v}),Object(s.jsx)(p.a,{variant:"contained",color:"success",type:"submit",onClick:function(e){m(),e.preventDefault()},children:"Add word"})]})}},v=n(155),m=n(154),y=n(62),w=n(83),k=function(e){var t=e.word,n=e.index,a=e.onMsg,r=e.setEditableWord;return Object(s.jsxs)(m.a,{children:[Object(s.jsx)(v.a,{component:"th",scope:"row",children:n}),Object(s.jsx)(v.a,{children:t.eng}),Object(s.jsx)(v.a,{children:t.rus}),Object(s.jsxs)(v.a,{children:[Object(s.jsx)(p.a,{variant:"contained",color:"secondary",onClick:function(e){r(t)},children:Object(s.jsx)(w.a,{})}),Object(s.jsx)(p.a,{variant:"contained",color:"error",onClick:function(e){j.deleteItem(t),a({type:"WordDeleted"})},children:Object(s.jsx)(y.a,{})})]})]})},L=n(84),C=n(151),W=function(e){var t=e.word,n=e.index,r=e.setEditableWord,c=e.onMsg,o=Object(a.useState)(t),d=Object(i.a)(o,2),l=d[0],b=d[1],f=function(e){var t=e.target,n=t.name,a=t.value;b((function(e){return Object(u.a)(Object(u.a)({},e),{},Object(h.a)({},n,a))})),console.log(l)};return Object(s.jsxs)(m.a,{children:[Object(s.jsx)(v.a,{component:"th",scope:"row",children:n}),Object(s.jsx)(v.a,{children:Object(s.jsx)(C.a,{label:"English",variant:"outlined",value:l.eng,onChange:f,name:"eng"})}),Object(s.jsx)(v.a,{children:Object(s.jsx)(C.a,{label:"Russian",variant:"outlined",value:l.rus,onChange:f,name:"rus"})}),Object(s.jsxs)(v.a,{children:[Object(s.jsx)(p.a,{variant:"contained",color:"success",onClick:function(e){j.updateItem(l),c({type:"WordUpdated"})},children:Object(s.jsx)(y.b,{})}),Object(s.jsx)(p.a,{variant:"contained",color:"error",onClick:function(e){r(null)},children:Object(s.jsx)(L.a,{})})]})]})},I=n(157),E=n(159),M=n(156),S=n(158),R=function(e){var t=e.wordsList,n=e.onMsg,r=Object(a.useState)(null),c=Object(i.a)(r,2),o=c[0],d=c[1];return Object(s.jsx)(s.Fragment,{children:Object(s.jsx)(M.a,{children:Object(s.jsxs)(I.a,{sx:{minWidth:650},"aria-label":"simple table",children:[Object(s.jsx)(S.a,{children:Object(s.jsxs)(m.a,{children:[Object(s.jsx)(v.a,{children:"\u2116"}),Object(s.jsx)(v.a,{children:"Eng"}),Object(s.jsx)(v.a,{children:"Rus"})]})}),Object(s.jsx)(E.a,{children:t.map((function(e,t){return e===o?Object(s.jsx)(W,{word:e,index:t+1,setEditableWord:d,onMsg:n},e.key):Object(s.jsx)(k,{word:e,index:t+1,onMsg:n,setEditableWord:d},e.key)}))})]})})})},D=function(e){var t=e.wordsList,n=e.onMsg;return Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)(x,{onMsg:n}),Object(s.jsx)(R,{wordsList:t,onMsg:n})]})},F=function(){var e=f(),t=e.state,n=e.reloadWordsList;switch(t.type){case"loading":return Object(s.jsx)(d,{});case"loaded":return Object(s.jsx)(s.Fragment,{children:Object(s.jsx)(D,{wordsList:t.wordsList,onMsg:function(e){switch(e.type){case"NewWordAdded":case"WordDeleted":case"WordUpdated":return void n();case"ListIsLoaded":return;default:b(e)}}})});case"error":return Object(s.jsx)(O,{onMsg:function(e){"ReloadDataButtonClicked"!==e.type?b(e.type):n()}});default:return b(t)}};var A=function(){return Object(s.jsx)(F,{})},B=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,161)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,c=t.getLCP,o=t.getTTFB;n(e),a(e),r(e),c(e),o(e)}))};o.a.render(Object(s.jsx)(r.a.StrictMode,{children:Object(s.jsx)(A,{})}),document.getElementById("root")),B()}},[[110,1,2]]]);
//# sourceMappingURL=main.b674331b.chunk.js.map
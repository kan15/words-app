(this["webpackJsonpwords-app"]=this["webpackJsonpwords-app"]||[]).push([[0],{121:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),c=n(42),s=n.n(c),o=n(60),i=n(19),d=n(3),l=function(){return Object(d.jsx)("div",{children:"Loading..."})},u=n(13),j=n(32),b=n(46);n(122);b.a.initializeApp({apiKey:"AIzaSyBr1PLF6Zdq_k2eLlR3HlgUApNGejrBNIA",authDomain:"english-vocabulary-react.firebaseapp.com",databaseURL:"https://english-vocabulary-react-default-rtdb.firebaseio.com",projectId:"english-vocabulary-react",storageBucket:"english-vocabulary-react.appspot.com",messagingSenderId:"281598012164",appId:"1:281598012164:web:7e8ed5899b5cf80bf8fe51"});var O={getData:function(){return new Promise((function(e,t){b.a.database().ref("words").on("value",(function(t){var n=function(e){var t=e.val();return Object.keys(t).map((function(e){var n=t[e];return Object(j.a)(Object(j.a)({},n),{},{key:e})}))}(t);return e(n)}),(function(e){t(e)}))}))},addItem:function(e){var t=b.a.database().ref().child("words").push().key,n={};return n["/words/".concat(t)]=e,b.a.database().ref().update(n)},updateItem:function(e){b.a.database().ref("words/".concat(e.key)).update({eng:e.eng,rus:e.rus})},deleteItem:function(e){console.log(e.key),b.a.database().ref("words/".concat(e.key)).remove().then((function(){console.log("Remove succeeded.")})).catch((function(e){console.log("Remove failed: ".concat(e.message))}))}},g=function(e){throw new Error(e)},f=function(){var e=Object(a.useState)({type:"loading"}),t=Object(u.a)(e,2),n=t[0],r=t[1];Object(a.useEffect)((function(){switch(n.type){case"loading":O.getData().then((function(e){r({type:"loaded",wordsList:e})})).catch((function(e){r({type:"error",error:e.message})}));break;case"loaded":case"error":break;default:g(n)}}),[n]);return{state:n,reloadWordsList:function(){r({type:"loading"})}}},h=function(e){var t=e.onMsg;return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("div",{children:"Server error"}),Object(d.jsx)("button",{title:"Reload data",type:"button",onClick:function(){t({type:"ReloadDataButtonClicked"})},children:"Reload data"})]})},x=n(5),p=n(173),v=n(166),m=function(e){var t=e.onMsg,n=function(){var e=Object(a.useState)({type:"not_asked"}),t=Object(u.a)(e,2),n=t[0],r=t[1];Object(a.useEffect)((function(){switch(n.type){case"not_asked":case"loaded":case"error":break;case"loading":c(n.draft);break;default:return g(n)}}),[n]);var c=function(e){O.addItem(e).then((function(){r({type:"loaded",word:e})})).catch((function(e){r({type:"error",error:e.message})}))};return{state:n,addWord:function(e){r({type:"loading",draft:e})},setError:function(e){r({type:"error",error:e})}}}(),r=n.state,c=n.addWord,s=n.setError,o=Object(a.useState)({eng:"",rus:""}),i=Object(u.a)(o,2),b=i[0],f=i[1];Object(a.useEffect)((function(){if("loaded"===r.type)t({type:"NewWordAdded",word:r.word})}),[t,r]);var h=function(e){var t=e.target,n=t.name,a=t.value;f((function(e){return Object(j.a)(Object(j.a)({},e),{},Object(x.a)({},n,a))}))},m=function(){!function(e){var t=e.eng.trim(),n=e.rus.trim();return!(t.length+n.length<2)&&!(!/^[\u0430-\u044f\u0410-\u042f\s]*$/.test(n)||!/^[a-zA-Z\s]*$/.test(t))}(b)?s("draft is not valid"):c(b)};switch(r.type){case"loading":return Object(d.jsx)(l,{});case"error":case"not_asked":case"loaded":return Object(d.jsxs)("form",{method:"get",onSubmit:m,children:["error"===r.type?r.error:"no errors",Object(d.jsx)(p.a,{type:"text",value:b.eng,name:"eng",onChange:h}),Object(d.jsx)(p.a,{type:"text",value:b.rus,name:"rus",onChange:h}),Object(d.jsx)(v.a,{variant:"contained",color:"success",type:"submit",onClick:function(e){m(),e.preventDefault()},children:"Add word"})]})}},y=n(168),w=n(167),k=n(68),L=n(89),E=function(e){var t=e.word,n=e.index,a=e.onMsg,r=e.setEditableWord;return Object(d.jsxs)(w.a,{children:[Object(d.jsx)(y.a,{component:"th",scope:"row",children:n}),Object(d.jsx)(y.a,{children:t.eng}),Object(d.jsx)(y.a,{children:t.rus}),Object(d.jsxs)(y.a,{children:[Object(d.jsx)(v.a,{variant:"contained",color:"secondary",onClick:function(e){r(t)},children:Object(d.jsx)(L.a,{})}),Object(d.jsx)(v.a,{variant:"contained",color:"error",onClick:function(e){O.deleteItem(t),a({type:"WordDeleted"})},children:Object(d.jsx)(k.a,{})})]})]})},S=n(90),W=n(161),I=function(e){var t=e.word,n=e.index,r=e.setEditableWord,c=e.onMsg,s=Object(a.useState)(t),o=Object(u.a)(s,2),i=o[0],l=o[1],b=function(e){var t=e.target,n=t.name,a=t.value;l((function(e){return Object(j.a)(Object(j.a)({},e),{},Object(x.a)({},n,a))})),console.log(i)};return Object(d.jsxs)(w.a,{children:[Object(d.jsx)(y.a,{component:"th",scope:"row",children:n}),Object(d.jsx)(y.a,{children:Object(d.jsx)(W.a,{label:"English",variant:"outlined",value:i.eng,onChange:b,name:"eng"})}),Object(d.jsx)(y.a,{children:Object(d.jsx)(W.a,{label:"Russian",variant:"outlined",value:i.rus,onChange:b,name:"rus"})}),Object(d.jsxs)(y.a,{children:[Object(d.jsx)(v.a,{variant:"contained",color:"success",onClick:function(e){O.updateItem(i),c({type:"WordUpdated"})},children:Object(d.jsx)(k.b,{})}),Object(d.jsx)(v.a,{variant:"contained",color:"error",onClick:function(e){r(null)},children:Object(d.jsx)(S.a,{})})]})]})},M=n(170),R=n(172),C=n(169),_=n(171),F=function(e){var t=e.wordsList,n=e.onMsg,r=Object(a.useState)(null),c=Object(u.a)(r,2),s=c[0],o=c[1];return Object(d.jsx)(d.Fragment,{children:Object(d.jsx)(C.a,{children:Object(d.jsxs)(M.a,{sx:{minWidth:650},"aria-label":"simple table",children:[Object(d.jsx)(_.a,{children:Object(d.jsxs)(w.a,{children:[Object(d.jsx)(y.a,{children:"\u2116"}),Object(d.jsx)(y.a,{children:"Eng"}),Object(d.jsx)(y.a,{children:"Rus"})]})}),Object(d.jsx)(R.a,{children:t.map((function(e,t){return e===s?Object(d.jsx)(I,{word:e,index:t+1,setEditableWord:o,onMsg:n},e.key):Object(d.jsx)(E,{word:e,index:t+1,onMsg:n,setEditableWord:o},e.key)}))})]})})})},U=function(e){var t=e.wordsList,n=e.onMsg;return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(m,{onMsg:n}),Object(d.jsx)(F,{wordsList:t,onMsg:n})]})},A=n(24),D=n(93),B=n(164),N=[{value:"ENG",label:"ENG-RU"},{value:"RU",label:"RU-ENG"}],P=function(e){var t=e.allWordsArray,n=e.onMsg,r=Object(a.useState)("ENG"),c=Object(u.a)(r,2),s=c[0],o=c[1],i=Object(a.useState)(0),l=Object(u.a)(i,2),j=l[0],b=l[1],O=function(){n({type:"StartLearning",label:s,amount:j})};return Object(d.jsxs)("form",{method:"get",onSubmit:O,children:[Object(d.jsx)(W.a,{select:!0,label:"Select",value:s,onChange:function(e){o(e.target.value)},helperText:"Please select your type",children:N.map((function(e){return Object(d.jsx)(B.a,{value:e.value,children:e.label},e.value)}))}),Object(d.jsx)(W.a,{id:"outlined-number",InputProps:{inputProps:{min:1}},label:"Number of words",type:"number",InputLabelProps:{shrink:!0},onChange:function(e){e.target.value&&b(+e.target.value),+e.target.value>t.length&&(e.target.value=t.length.toString(),console.log("\u0412 \u0432\u0430\u0448\u0435\u043c \u0441\u043f\u0438\u0441\u043a\u0435 \u043d\u0435\u0442 \u0441\u0442\u043e\u043b\u044c\u043a\u043e \u0441\u043b\u043e\u0432"))}}),j?Object(d.jsx)(v.a,{id:"startLearningBtn",variant:"contained",type:"submit",onClick:function(e){e.preventDefault(),O()},children:"Start Learning"}):null]})},G=function(e){var t=e.word,n=e.index,r=e.onMsg,c=Object(a.useState)(t),s=Object(u.a)(c,2),o=s[0],i=s[1];Object(a.useEffect)((function(){r({type:"UserEnteredWord",wordFromUser:o})}),[o]);return Object(d.jsxs)(w.a,{children:[Object(d.jsx)(y.a,{component:"th",scope:"row",children:++n}),Object(d.jsx)(y.a,{children:t.show}),Object(d.jsx)(y.a,{children:Object(d.jsx)(W.a,{variant:"outlined",onBlur:function(e){var t=e.target.value;t!==o.userInput&&i(Object(j.a)(Object(j.a)({},o),{},{userInput:t}))}})})]})},T=function(e){var t=e.labelTable,n=e.learningWords,a=e.onMsg;return Object(d.jsx)(d.Fragment,{children:Object(d.jsx)(C.a,{children:Object(d.jsxs)(M.a,{sx:{minWidth:650},"aria-label":"simple table",children:[Object(d.jsx)(_.a,{children:Object(d.jsxs)(w.a,{children:[Object(d.jsx)(y.a,{children:"\u2116"}),Object(d.jsx)(y.a,{children:"RU"===t?"Russian":"English"}),Object(d.jsx)(y.a,{children:"RU"===t?"English":"Russian"})]})}),Object(d.jsx)(R.a,{children:n.map((function(e,t){return Object(d.jsx)(G,{word:e,index:t,onMsg:a},e.id)}))})]})})})},z=n(163),H=["key"],J=function(e){var t=e.wordsList,n=Object(a.useState)({type:"getting_user_data"}),r=Object(u.a)(n,2),c=r[0],s=r[1],o=Object(a.useState)([]),i=Object(u.a)(o,2),l=i[0],j=i[1];Object(a.useEffect)((function(){switch(c.type){case"getting_user_data":case"error":break;case"got_user_data":j(O(c.data))}}),[c]);var b=t.map((function(e){e.key;return Object(D.a)(e,H)})),O=function(e){var t=b.sort((function(){return Math.random()-.5})).slice(0,e.amount).map((function(t){return{id:Object(z.a)(),show:"RU"===e.label?t.rus:t.eng,hide:"RU"===e.label?t.eng:t.rus,userInput:""}}));return console.log("\u0418\u0437\u0443\u0447\u0430\u0435\u043c\u044b\u0439 \u043c\u0430\u0441\u0441\u0438\u0432 \u0441\u043b\u043e\u0432:"),console.log(t),t};switch(c.type){case"getting_user_data":return Object(d.jsx)(d.Fragment,{children:Object(d.jsx)(P,{allWordsArray:b,onMsg:function(e){if("StartLearning"===e.type)s({type:"got_user_data",data:{label:e.label,amount:e.amount}})}})});case"got_user_data":return Object(d.jsx)(d.Fragment,{children:Object(d.jsx)(T,{labelTable:c.data.label,learningWords:l,onMsg:function(e){if("UserEnteredWord"===e.type)!function(e){var t=Object(A.a)(l),n=t.findIndex((function(t){return t.id===e.id}));t[n]=e,j(t)}(e.wordFromUser)}})});case"error":return Object(d.jsx)(d.Fragment,{})}},Z=function(){var e=f(),t=e.state,n=e.reloadWordsList;switch(t.type){case"loading":return Object(d.jsx)(l,{});case"loaded":return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsxs)("header",{children:[Object(d.jsx)(o.b,{to:"/",children:"Home"}),Object(d.jsx)(o.b,{to:"/learning",children:"Start learning"})]}),Object(d.jsxs)(i.c,{children:[Object(d.jsx)(i.a,{path:"/",element:Object(d.jsx)(U,{wordsList:t.wordsList,onMsg:function(e){switch(e.type){case"NewWordAdded":case"WordDeleted":case"WordUpdated":return void n();case"ListIsLoaded":return;default:g(e)}}})}),Object(d.jsx)(i.a,{path:"/learning",element:Object(d.jsx)(J,{wordsList:t.wordsList})})]})]});case"error":return Object(d.jsx)(h,{onMsg:function(e){"ReloadDataButtonClicked"!==e.type?g(e.type):n()}});default:return g(t)}};var $=function(){return Object(d.jsx)(Z,{})},q=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,174)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,c=t.getLCP,s=t.getTTFB;n(e),a(e),r(e),c(e),s(e)}))};s.a.render(Object(d.jsx)(r.a.StrictMode,{children:Object(d.jsx)(o.a,{children:Object(d.jsx)($,{})})}),document.getElementById("root")),q()}},[[121,1,2]]]);
//# sourceMappingURL=main.647a2583.chunk.js.map
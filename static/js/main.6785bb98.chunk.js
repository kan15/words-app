(this["webpackJsonpwords-app"]=this["webpackJsonpwords-app"]||[]).push([[0],{125:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n.n(r),c=n(44),o=n.n(c),s=n(63),i=n(18),d=n(3),u=function(){return Object(d.jsx)("div",{children:"Loading..."})},l=n(11),j=n(33),b=n(49);n(126);b.a.initializeApp({apiKey:"AIzaSyBr1PLF6Zdq_k2eLlR3HlgUApNGejrBNIA",authDomain:"english-vocabulary-react.firebaseapp.com",databaseURL:"https://english-vocabulary-react-default-rtdb.firebaseio.com",projectId:"english-vocabulary-react",storageBucket:"english-vocabulary-react.appspot.com",messagingSenderId:"281598012164",appId:"1:281598012164:web:7e8ed5899b5cf80bf8fe51"});var h={getData:function(){return new Promise((function(e,t){b.a.database().ref("words").on("value",(function(t){var n=function(e){var t=e.val();return Object.keys(t).map((function(e){var n=t[e];return Object(j.a)(Object(j.a)({},n),{},{key:e})}))}(t);return e(n)}),(function(e){t(e)}))}))},addItem:function(e){var t=b.a.database().ref().child("words").push().key,n={};return n["/words/".concat(t)]=e,b.a.database().ref().update(n)},updateItem:function(e){b.a.database().ref("words/".concat(e.key)).update({eng:e.eng,rus:e.rus})},deleteItem:function(e){console.log(e.key),b.a.database().ref("words/".concat(e.key)).remove().then((function(){console.log("Remove succeeded.")})).catch((function(e){console.log("Remove failed: ".concat(e.message))}))}},f=function(e){throw new Error(e)},g=function(){var e=Object(r.useState)({type:"loading"}),t=Object(l.a)(e,2),n=t[0],a=t[1];Object(r.useEffect)((function(){switch(n.type){case"loading":h.getData().then((function(e){a({type:"loaded",wordsList:e})})).catch((function(e){a({type:"error",error:e.message})}));break;case"loaded":case"error":break;default:f(n)}}),[n]);return{state:n,reloadWordsList:function(){a({type:"loading"})}}},O=function(e){var t=e.onMsg;return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("div",{children:"Server error"}),Object(d.jsx)("button",{title:"Reload data",type:"button",onClick:function(){t({type:"reload_data_button_clicked"})},children:"Reload data"})]})},p=n(5),x=n(180),v=n(173),m=function(e){var t=e.onMsg,n=function(){var e=Object(r.useState)({type:"not_asked"}),t=Object(l.a)(e,2),n=t[0],a=t[1];Object(r.useEffect)((function(){switch(n.type){case"not_asked":case"loaded":case"error":break;case"loading":c(n.draft);break;default:return f(n)}}),[n]);var c=function(e){h.addItem(e).then((function(){a({type:"loaded",word:e})})).catch((function(e){a({type:"error",error:e.message})}))};return{state:n,addWord:function(e){a({type:"loading",draft:e})},setError:function(e){a({type:"error",error:e})}}}(),a=n.state,c=n.addWord,o=n.setError,s=Object(r.useState)({eng:"",rus:""}),i=Object(l.a)(s,2),b=i[0],g=i[1];Object(r.useEffect)((function(){if("loaded"===a.type)t({type:"new_word_added",word:a.word})}),[t,a]);var O=function(e){var t=e.target,n=t.name,r=t.value;g((function(e){return Object(j.a)(Object(j.a)({},e),{},Object(p.a)({},n,r))}))},m=function(){!function(e){var t=e.eng.trim(),n=e.rus.trim();return!(t.length+n.length<2)&&!(!/^[\u0430-\u044f\u0410-\u042f\s]*$/.test(n)||!/^[a-zA-Z\s]*$/.test(t))}(b)?o("draft is not valid"):c(b)};switch(a.type){case"loading":return Object(d.jsx)(u,{});case"error":case"not_asked":case"loaded":return Object(d.jsxs)("form",{method:"get",onSubmit:m,children:["error"===a.type?a.error:"no errors",Object(d.jsx)(x.a,{type:"text",value:b.eng,name:"eng",onChange:O}),Object(d.jsx)(x.a,{type:"text",value:b.rus,name:"rus",onChange:O}),Object(d.jsx)(v.a,{variant:"contained",color:"success",type:"submit",onClick:function(e){m(),e.preventDefault()},children:"Add word"})]})}},w=n(177),y=n(179),_=n(175),k=n(176),C=n(178),I=n(174),M=n(93),L=n(71),S=n(167),E=function(e){var t=e.word,n=e.index,a=e.onMsg,c=e.onWordsListMsg,o=Object(r.useState)(t),s=Object(l.a)(o,2),i=s[0],u=s[1],b=function(e){var t=e.target,n=t.name,r=t.value;u((function(e){return Object(j.a)(Object(j.a)({},e),{},Object(p.a)({},n,r))})),console.log(i)};return Object(d.jsxs)(I.a,{children:[Object(d.jsx)(_.a,{component:"th",scope:"row",children:n}),Object(d.jsx)(_.a,{children:Object(d.jsx)(S.a,{label:"English",variant:"outlined",value:i.eng,onChange:b,name:"eng"})}),Object(d.jsx)(_.a,{children:Object(d.jsx)(S.a,{label:"Russian",variant:"outlined",value:i.rus,onChange:b,name:"rus"})}),Object(d.jsxs)(_.a,{children:[Object(d.jsx)(v.a,{variant:"contained",color:"success",onClick:function(e){h.updateItem(i),a({type:"word_updated"})},children:Object(d.jsx)(L.b,{})}),Object(d.jsx)(v.a,{variant:"contained",color:"error",onClick:function(e){c({type:"cancel_change"})},children:Object(d.jsx)(M.a,{})})]})]})},R=n(94),F=function(e){var t=e.word,n=e.index,r=e.onMsg,a=e.onWordsListMsg;return Object(d.jsxs)(I.a,{children:[Object(d.jsx)(_.a,{component:"th",scope:"row",children:n}),Object(d.jsx)(_.a,{children:t.eng}),Object(d.jsx)(_.a,{children:t.rus}),Object(d.jsxs)(_.a,{children:[Object(d.jsx)(v.a,{variant:"contained",color:"secondary",onClick:function(e){a({type:"change_this_word",word:t})},children:Object(d.jsx)(R.a,{})}),Object(d.jsx)(v.a,{variant:"contained",color:"error",onClick:function(e){h.deleteItem(t),r({type:"word_deleted"})},children:Object(d.jsx)(L.a,{})})]})]})},W=function(e){var t=e.wordsList,n=e.onMsg,a=Object(r.useState)(null),c=Object(l.a)(a,2),o=c[0],s=c[1];return Object(d.jsx)(d.Fragment,{children:Object(d.jsx)(k.a,{children:Object(d.jsxs)(w.a,{sx:{minWidth:650},"aria-label":"simple table",children:[Object(d.jsx)(C.a,{children:Object(d.jsxs)(I.a,{children:[Object(d.jsx)(_.a,{children:"\u2116"}),Object(d.jsx)(_.a,{children:"Eng"}),Object(d.jsx)(_.a,{children:"Rus"})]})}),Object(d.jsx)(y.a,{children:t.map((function(e,t){return e===o?Object(d.jsx)(E,{word:e,index:t+1,onMsg:n,onWordsListMsg:function(e){if("cancel_change"===e.type)s(null)}},e.key):Object(d.jsx)(F,{word:e,index:t+1,onMsg:n,onWordsListMsg:function(t){if("change_this_word"===t.type)s(e)}},e.key)}))})]})})})},B=function(e){var t=e.wordsList,n=e.onMsg;return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(m,{onMsg:n}),Object(d.jsx)(W,{wordsList:t,onMsg:n})]})},U=n(24),A=n(97),P=n(166),N=n(170),D=[{value:"ENG",label:"ENG-RU"},{value:"RU",label:"RU-ENG"}],G=function(e){var t=e.allWordsArray,n=e.onMsg,a=Object(r.useState)("ENG"),c=Object(l.a)(a,2),o=c[0],s=c[1],i=Object(r.useState)(0),u=Object(l.a)(i,2),j=u[0],b=u[1];return Object(d.jsxs)("form",{method:"get",onSubmit:function(e){n({type:"start_learning",label:o,amount:j}),e.preventDefault()},children:[Object(d.jsx)(P.a,{labelId:"demo-simple-select-label",id:"demo-simple-select",value:o,label:"Language",onChange:function(e){s(e.target.value)},children:D.map((function(e){return Object(d.jsx)(N.a,{value:e.value,children:e.label},e.value)}))}),Object(d.jsx)(S.a,{id:"outlined-number",InputProps:{inputProps:{min:1}},label:"Number of words",type:"number",InputLabelProps:{shrink:!0},onChange:function(e){e.target.value&&b(+e.target.value),+e.target.value>t.length&&(e.target.value=t.length.toString(),console.log("\u0412 \u0432\u0430\u0448\u0435\u043c \u0441\u043f\u0438\u0441\u043a\u0435 \u043d\u0435\u0442 \u0441\u0442\u043e\u043b\u044c\u043a\u043e \u0441\u043b\u043e\u0432"))}}),j?Object(d.jsx)(v.a,{id:"startLearningBtn",variant:"contained",type:"submit",children:"Start Learning"}):null]})},T=function(e){var t=e.word,n=e.index,a=e.onMsg,c=e.result,o=e.correctButtonIsClicked,s=Object(r.useState)(t),i=Object(l.a)(s,2),u=i[0],b=i[1],h=Object(r.useState)(""),f=Object(l.a)(h,2),g=f[0],O=f[1];Object(r.useEffect)((function(){a({type:"user_entered_word",wordFromUser:u})}),[u]);return Object(d.jsxs)(I.a,{children:[Object(d.jsx)(_.a,{component:"th",scope:"row",children:++n}),Object(d.jsx)(_.a,{children:t.show}),Object(d.jsx)(_.a,{children:Object(d.jsx)(S.a,{onChange:function(e){O(e.target.value)},value:g,disabled:function(){var e=c.find((function(e){return e.id===t.id}));return!o&&c.length>0||!(o&&void 0!==e&&!e.isCorrect)&&(!(!o||void 0===e||!e.isCorrect)||void 0)}(),variant:"outlined",onBlur:function(e){var t=e.target.value;t!==u.userInput&&b(Object(j.a)(Object(j.a)({},u),{},{userInput:t}))},inputProps:{sx:{backgroundColor:function(){var e=c.find((function(e){return e.id===t.id}));return void 0!==e&&e.isCorrect?"#99ff99":void 0===e||e.isCorrect?"#fff":"#ff6666"}()}}})})]})},z=function(e){var t=e.labelTable,n=e.learningWords,r=e.onMsg,a=e.result,c=e.correctButtonIsClicked;return Object(d.jsx)(d.Fragment,{children:Object(d.jsx)(k.a,{children:Object(d.jsxs)(w.a,{sx:{minWidth:650},"aria-label":"simple table",children:[Object(d.jsx)(C.a,{children:Object(d.jsxs)(I.a,{children:[Object(d.jsx)(_.a,{children:"\u2116"}),Object(d.jsx)(_.a,{children:"RU"===t?"Russian":"English"}),Object(d.jsx)(_.a,{children:"RU"===t?"English":"Russian"})]})}),Object(d.jsx)(y.a,{children:n.map((function(e,t){return Object(d.jsx)(T,{word:e,index:t,onMsg:r,result:a,correctButtonIsClicked:c},e.id)}))})]})})})},H=n(169),J=function(e){var t=e.onMsg,n=e.result,r=e.correctButtonIsClicked,a=function(e){return e.find((function(e){return!e.isCorrect}))};return 0===n.length||r&&n.length>0?Object(d.jsx)(v.a,{variant:"contained",onClick:function(e){t({type:"check_user_words"})},children:"Check"}):n.length>0&&void 0!==a(n)?Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(v.a,{variant:"contained",onClick:function(e){t({type:"correct_user_words"})},children:"Correct the wrong words"}),Object(d.jsx)(v.a,{variant:"contained",onClick:function(e){t({type:"show_result"})},children:"Get result"})]}):n.length>0&&void 0===a(n)?Object(d.jsx)(v.a,{variant:"contained",onClick:function(e){},children:"That's right!"}):Object(d.jsx)(v.a,{variant:"contained",onClick:function(e){},children:"Error"})},Z=function(e){var t=e.result;return Object(d.jsxs)("div",{children:["You have studied ",t.length," words. ",t.filter((function(e){return e.isCorrect})).length," of them are correct and ",t.filter((function(e){return!e.isCorrect})).length," are incorrect."]})},$=["key"],q=function(e){var t=e.wordsList,n=Object(r.useState)({type:"getting_user_data"}),a=Object(l.a)(n,2),c=a[0],o=a[1],s=Object(r.useState)([]),i=Object(l.a)(s,2),u=i[0],j=i[1],b=Object(r.useState)([]),h=Object(l.a)(b,2),g=h[0],O=h[1],p=Object(r.useState)(!1),x=Object(l.a)(p,2),v=x[0],m=x[1];Object(r.useEffect)((function(){switch(c.type){case"getting_user_data":case"error":break;case"got_user_data":j(y(c.data))}}),[c]);var w=t.map((function(e){e.key;return Object(A.a)(e,$)})),y=function(e){return w.sort((function(){return Math.random()-.5})).slice(0,e.amount).map((function(t){return{id:Object(H.a)(),show:"RU"===e.label?t.rus:t.eng,hide:"RU"===e.label?t.eng:t.rus,userInput:""}}))};switch(c.type){case"getting_user_data":return Object(d.jsx)(d.Fragment,{children:Object(d.jsx)(G,{allWordsArray:w,onMsg:function(e){if("start_learning"===e.type)o({type:"got_user_data",data:{label:e.label,amount:e.amount}})}})});case"got_user_data":return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(z,{labelTable:c.data.label,learningWords:u,result:g,correctButtonIsClicked:v,onMsg:function(e){switch(e.type){case"check_user_words":break;case"user_entered_word":!function(e){var t=Object(U.a)(u),n=t.findIndex((function(t){return t.id===e.id}));t[n]=e,j(t),console.log(t)}(e.wordFromUser);break;default:f(e)}}}),Object(d.jsx)(J,{result:g,correctButtonIsClicked:v,onMsg:function(e){switch(e.type){case"check_user_words":m(!1),O(function(e){console.log(e);var t=e.map((function(e){return{id:e.id,isCorrect:e.hide===e.userInput}}));return console.log(t),t}(u));break;case"correct_user_words":m(!0);break;case"show_result":o({type:"show_result"})}}})]});case"show_result":return Object(d.jsx)(Z,{result:g});case"error":return Object(d.jsx)(d.Fragment,{})}},K=function(){var e=g(),t=e.state,n=e.reloadWordsList;switch(t.type){case"loading":return Object(d.jsx)(u,{});case"loaded":return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsxs)("header",{children:[Object(d.jsx)(s.b,{to:"/",children:"Home"}),Object(d.jsx)(s.b,{to:"/learning",children:"Start learning"})]}),Object(d.jsxs)(i.c,{children:[Object(d.jsx)(i.a,{path:"/",element:Object(d.jsx)(B,{wordsList:t.wordsList,onMsg:function(e){switch(e.type){case"new_word_added":case"word_deleted":case"word_updated":return void n();case"list_is_loaded":return;default:f(e)}}})}),Object(d.jsx)(i.a,{path:"/learning",element:Object(d.jsx)(q,{wordsList:t.wordsList})})]})]});case"error":return Object(d.jsx)(O,{onMsg:function(e){"reload_data_button_clicked"!==e.type?f(e.type):n()}});default:return f(t)}};var Y=function(){return Object(d.jsx)(K,{})},Q=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,182)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,o=t.getTTFB;n(e),r(e),a(e),c(e),o(e)}))};o.a.render(Object(d.jsx)(a.a.StrictMode,{children:Object(d.jsx)(s.a,{children:Object(d.jsx)(Y,{})})}),document.getElementById("root")),Q()}},[[125,1,2]]]);
//# sourceMappingURL=main.6785bb98.chunk.js.map